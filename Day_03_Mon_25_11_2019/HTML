<body>
E.M. Roelofsen<br> 
Blockchain Minor IT<br>
Get current Ethereum blocknumber<br>
Compare to <a href="https://etherscan.io/blocks" target="_blank">Etherscan</a>
<pre id="log" style="width:100%;height:200px"></pre> 
<script>

function log(logstr) {   
    document.getElementById("log").innerHTML +=logstr+"\n";
}      

async function latestBlock() {
  const request=JSON.stringify({"jsonrpc":"2.0","method":"eth_getBlockByNumber","params":["latest", true],"id":67});
  log(`Sending request for info about the latest Block in the chain ${request}`);
  const rawResponse = await fetch('https://mainnet.infura.io', {
    method: 'POST',
    headers: {
      'Accept': 'application/json',
      'Content-Type': 'application/json'
    },
    body: request
  });
  const content = await rawResponse.json();
  log(`Received answer for info about the latest Block in the chain ${JSON.stringify(content)}`);
}

async function latestBlockTransactions() {
  const request=JSON.stringify({"jsonrpc":"2.0","method":"eth_getBlockTransactionCountByNumber","params":["latest"],"id":1});
  log(`Sending request for amount of transactions in the latest block ${request}`);
  const rawResponse = await fetch('https://mainnet.infura.io', {
    method: 'POST',
    headers: {
      'Accept': 'application/json',
      'Content-Type': 'application/json'
    },
    body: request
  });
  const content = await rawResponse.json();
  log(`Received answer for amount of transactions in the latest block ${JSON.stringify(content)}`);
}

latestBlock();
latestBlockTransactions();
</script>
</body>
